import { render, screen, fireEvent } from "@testing-library/react";
import App from "./App"; // Adjust path if necessary
import "@testing-library/jest-dom";

describe("App Component", () => {
  test("renders the App component with ToggleButton", () => {
    render(<App />);
    
    // Check if ToggleButton exists
    const toggleButton = screen.getByRole("button");
    expect(toggleButton).toBeInTheDocument();
  });

  test("initially shows GraphComponent and hides RFGComponent", () => {
    render(<App />);
    
    // GraphComponent should be visible
    const sigmaContainer = screen.getByTestId("sigma-container");
    expect(sigmaContainer).toHaveClass("visible");

    // RFGComponent should be hidden
    const rfgContainer = screen.getByTestId("rfg-container");
    expect(rfgContainer).toHaveClass("hidden");
  });

  test("toggles visibility of GraphComponent and RFGComponent on button click", () => {
    render(<App />);
    
    const toggleButton = screen.getByRole("button");

    // Click the button to toggle
    fireEvent.click(toggleButton);

    // GraphComponent should now be hidden
    expect(screen.getByTestId("sigma-container")).toHaveClass("hidden");
    
    // RFGComponent should now be visible
    expect(screen.getByTestId("rfg-container")).toHaveClass("visible");

    // Click again to toggle back
    fireEvent.click(toggleButton);

    // GraphComponent should now be visible
    expect(screen.getByTestId("sigma-container")).toHaveClass("visible");

    // RFGComponent should now be hidden
    expect(screen.getByTestId("rfg-container")).toHaveClass("hidden");
  });
});
